<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PGFPlots ä»£ç ç”Ÿæˆå™¨</title>
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/normalize/8.0.1/normalize.min.css">
    <link rel="stylesheet" href="main.css">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <div class="nav">
            <a id="title" href="https://logcreative.github.io/LaTeXSparkle/" target="_blank" class="logo"><svg style="fill: black; font-family: Times,'å®‹ä½“'" width="144" height="35">
                <text x="0" y="28" style="font-size: x-large">åƒ</text>
                <text x="21" y="23" style="font-size:large">æ¨¡</text>
                <text x="36" y="33" style="font-size: x-large">åƒ</text>
                <text x="56" y="28" style="font-size:x-large">æ ·</text>
                <text x="85" y="28" style="font-size:x-large">L</text>
                <text x="92" y="23" style="font-size:large">A</text>
                <text x="102" y="28" style="font-size:x-large">T</text>
                <text x="114" y="33" style="font-size:x-large">E</text>
                <text x="126" y="28" style="font-size:x-large">X</text>
                </svg></a> Â· <a href="https://github.com/LogCreative/PGFPlotsEdt" target="_blank">PGFPlots ä»£ç ç”Ÿæˆå™¨</a> Â· åŸå‹æœº
            <div id="extlinks">
                <div>
                    <a href="https://mirrors.rit.edu/CTAN/graphics/pgf/contrib/pgfplots/doc/pgfplots.pdf" target="_blank">PGFPlots æ‰‹å†Œ</a>
                </div>
                <div>
                    <a href="https://logcreative.github.io/PGFPlotsEdt/index.html">ä¸­æ–‡</a>|<a title="Under Construction">English</a>
                </div>
            </div>
    </div>
    <div class="container" id="app">
        <div id="panel-one" class="split">
            <div id="panel-vone">
                <button v-on="{click: compile}" id="compileBtn">ç¼–è¯‘</button><br>
                <iframe v-bind:src="curl" id="compilePrev"></iframe>
            </div>
            <div id="panel-vtwo">
                <details>
                    <summary>
                        åæ ‡ç³»
                    </summary>
                    <div id="axis">
                        <!-- <tr><td>å¢è¡¥å‚æ•°</td><td><input type="text" v-model="surplusparam" placeholder="å‚æ•°"></input></td></tr><br><parambar v-show="paramfoc" :command="surplusparam" :etd="td"></parambar> -->
                        <surplus :id="0" :ontd="td" :onlegend="enableLegend"></surplus>
                        <tr><td>åæ ‡è½´ç±»å‹</td>
                            <td>
                                <select v-model="axistype">
                                    <option value="0">æ™®é€šåæ ‡è½´</option>
                                    <option value="1">xå¯¹æ•°è½´</option>
                                    <option value="2">yå¯¹æ•°è½´</option>
                                    <option value="3">åŒå¯¹æ•°è½´</option>
                                </select>
                            </td>
                        </tr>
                            <property chname="æ ‡é¢˜" propkey="title"></property>
                            <property chname="å®½åº¦" propkey="width"></property>    
                            <property chname="é«˜åº¦" propkey="height"></property>
                            <propertyselect chname="å­—å·" propkey="font" :options="['\\tiny','\\scriptsize','\\footnotesize','\\small','\\normalsize','\\large','\\Large','\\LARGE','\\huge','\\Huge']"></propertyselect>    
                            <propertyselect chname="ç½‘æ ¼" propkey="grid" :options="['major','minor','both','none']"></propertyselect> 
                        <div v-show="enableLegend">
                            <propertyselect chname="å›¾ä¾‹ä½ç½®" propkey="legend pos" :options="['south west','south east','north west','north east','outer north east']"></propertyselect>    
                        </div>
                            <tr>xè½´</tr>
                            <property chname="è½´é¢˜" propkey="xlabel"></property>
                            <property chname="æœ€å°" propkey="xmin"></property>
                            <property chname="æœ€å¤§" propkey="xmax"></property>
                            <propertyselect chname="ç®­å¤´" propkey="axis x line" :options="['top','middle','bottom']"></propertyselect>
                            <tr>yè½´</tr>
                            <property chname="è½´é¢˜" propkey="ylabel"></property>
                            <property chname="æœ€å°" propkey="ymin"></property>
                            <property chname="æœ€å¤§" propkey="ymax"></property>
                            <propertyselect chname="ç®­å¤´" propkey="axis y line" :options="['left','middle','right']"></propertyselect>
                        <div v-show="td">
                            <tr>zè½´</tr>
                            <property chname="è½´é¢˜" propkey="zlabel"></property>
                            <property chname="æœ€å°" propkey="zmin"></property>
                            <property chname="æœ€å¤§" propkey="zmax"></property>
                            <propertyselect chname="ç®­å¤´" propkey="axis z line" :options="['left','middle','right']"></propertyselect>
                        </div>
                    </div>
                </details>
            </div>
        </div>
        <!-- <div class="dragbar" id="dragbar"></div> -->
        <div id="panel-two" class="split">
            <div id="settings">
                <details id="packages">
                    <summary>
                        è®¾å®š
                    </summary>
                    <input type="checkbox" onclick="chnClick(this)" checked="true">å¯ç”¨ä¸­æ–‡</input>
                    <input type="checkbox" onclick="pinClick(this)" v-model="enablepin">å¯ç”¨æ ‡æ³¨</input>
                    <input type="checkbox" v-model="td">å¯ç”¨ä¸‰ç»´å‚æ•°</input>
                    <input type="checkbox" v-model="enableLegend">å¯ç”¨å›¾ä¾‹</input>
                    <input type="checkbox" onclick="sourceClick(this)" v-model="enablesource">å¯ç”¨æ•°æ®æº</input>
                    <div>
                        <lib :id="1" category="tikz" chname="æ ‡è®°åº“" libname="plotmarks" customized="0"></lib>
                        <lib :id="2" category="pgfplots" chname="é¢œè‰²åº“" libname="colorbrewer" customized="0"></lib>
                        <lib category="selectcolormodel" chname="CMYKæ¨¡å¼" libname="cmyk" customized="1"></lib>
                        <lib :id="4" category="pgfplots" chname="ç»Ÿè®¡åº“" libname="statistics" customized="0"></lib>
                        <lib :id="5" category="pgfplots" chname="é—´éš™å¡«å……åº“" libname="fillbetween" customized="0"></lib>
                    </div>
                </details>
                <details open="true">
                    <summary>
                        æ•°æ®
                    </summary>
                    <div id="addtooltip">
                        <button>+ ç³»åˆ—</button>
                        <div id="addbuttons">
                            <div v-show="enablesource"><button onclick="addsourceClick()"> è¡¨æº</button></div>
                            <div><button onclick="addexprClick()">\(\tiny f(x)\) å‡½æ•°</button></div>
                            <div><button onclick="addcoordClick()">\(\tiny (x,y)\) åæ ‡</button></div>
                            <div><button onclick="addtableClick()">\(\tiny x~~y~~\)æ–‡ä»¶</button></div>
                            <div v-show="enablepin"><button onclick="addnodeClick()">\(\tiny \rm abc~~\)æ ‡æ³¨</button></div>
                        </div>
                    </div>
                    <div id="series">
                        <div id="sours" v-show="enablesource">
                            <div v-for="comp in sources" :key="comp.innerId">
                                <Tsource :id="comp.id"></Tsource>
                            </div>
                        </div>
                        <div id="exprs">
                            <div v-for="comp in expressions" :key="comp.innerId">
                                <expression :id="comp.id" :ontd="td" :onlegend="enableLegend"></expression>
                            </div>
                        </div>
                        <div id="coords">
                            <div v-for="comp in coordinates">
                                <coordinate :id="comp.id" :ontd="td" :onlegend="enableLegend"></coordinate>
                            </div>
                        </div>
                        <div id="tables">
                            <div v-for="comp in tableps">
                                <tablep :id="comp.id" :ontd="td" :onlegend="enableLegend" :enablesource="enablesource"></tablep>
                            </div>
                        </div>
                        <div id="nodes" v-show="enablepin">
                            <div v-for="comp in nodeps">
                                <node :id="comp.id"></node>
                            </div>
                        </div>
                    </div>
                </details>
            </div>
            
            
            <div id="code">
                <textarea id="manualfile" style="display:none; min-height: 450px;"></textarea>
            </div>
        </div> 
        <div id="panel-three" class="split">
            <div id="auto">
            <details id="codedetail">
                <summary>
                    ä»£ç 
                </summary>
                <div>
                <textarea v-model="premable" readonly="readonly" style="min-height: 130px;"></textarea>
                <textarea v-model="content" id="texContent" readonly="readonly" style="min-height: 200px;">\begin{axis}[{{param}}]
        {{series}}
    \end{axis}</textarea>
                <textarea v-model="suffix" readonly="readonly" style="min-height: 50px;"></textarea>
            </div>
            </details>
            <button v-clipboard:copy="content">å¤åˆ¶ç»˜å›¾ä»£ç </button>
            <button v-clipboard:copy="file">å¤åˆ¶å…¨éƒ¨ä»£ç </button>
            <button onclick="gomanual()">æ‰‹åŠ¨ç¼–è¾‘âš </button>
        </div> 
        </div>
        
        
    </div>
    <template id="libtpl">
        <td><input type="checkbox" v-model="enabled" @change="onlibchange">{{chname}}</input></td>
    </template>
    <template id="parambartpl">
        <div class="parambar" style="display: block;">
            <div class="title" style="display: block;">
                å‚æ•°è®¾ç½®
                <div v-show="bestMatch[0]!='no'"><div class="matchkey">{{bestMatch[0]}}</div><div class="matchnote">{{bestMatch[1][0]}}</div><div class="matchside" v-show="bestMatch[2]">=...</div><div class="matchside" v-show="!bestMatch[2]">,</div></div>
            </div>
            <div class="notes">
                <div v-for="(value,key,index) in matchedCommands" v-show="!eq">
                    <div style="display: block;">
                        <div class="matchkey">{{key}}</div><div class="matchnote">{{value[0]}}</div>
                    </div>
                </div>
                <div v-for="(value,key,index) in submenu" v-show="eq">
                    <div class="matchkey">{{key}}</div><div class="matchnote">{{value[0]}}</div><div class="matchside"><colorbox :color="value[2]" v-show="value[1]=='color'"></colorbox></div>
                </div>
            </div>
        </div>
    </template>
    <template id="exprtpl">
        <div v-show="enabled" class="seriesitem">
            <div class="type" v-soutline="show">
                <label>
                    <div v-show="!onlegend">å‡½æ•°</div>
                    <div v-show="onlegend"><input type="text" class="legend" placeholder="å‡½æ•°" v-model="legend" @keyup="on_change" ></div>
                     [{{idInner|addZero}}]
                    <input type="checkbox" class="showToggle" @click="onschange" v-model="show" title="æ˜¾ç¤ºå›¾å±‚">
                </label>
            </div>
            <div><button class="upBut" @click="moveUp" title="ç½®äºé¡¶å±‚">â†‘</button></div>
            <div><button class="deleteBut" @click="deleteComp" title="åˆ é™¤ç³»åˆ—">ğŸ—‘</button></div>
            <div class="ttd" v-show="ontd">
                <input type="checkbox" @click="ontdchange" v-model="etd" title="ä¸‰ç»´åæ ‡">
            </div>
            <div class="ptd">
                <input type="checkbox" @click="onpchange" v-model="plus" title="æ ·å¼è¿ç»­">
            </div>
            <div class="ctd">
                <input type="checkbox" @click="oncchange" v-model="cycle" title="å¾ªç¯é¢ç§¯">
            </div>
            <div><input type="text" class="param" placeholder="å‚æ•°" v-model="param" @keyup="onpachange" @focus="param_focused" @blur="param_losefocus"></div>
            <div><input type="text" class="coord" placeholder="å‡½æ•°å¼" v-model="expression" @keyup="on_change" v-minimize="etd"></div>
            <div v-show="etd"><input type="text" class="coord2" placeholder="yè½´" v-model="expression2" @keyup="on_change"></div>
            <div v-show="etd"><input type="text" v-model="expression3" class="coord3" placeholder="zè½´" @keyup="on_change"></div>
            <parambar v-show="paramfoc" @click="param_focused" :command="command" :etd="etd" :global="false"></parambar>
        </div>
    </template>
    <template id="coordbartpl">
        <div class="coordbar" style="display: block;">
            <div class="title" style="display: block;">åæ ‡æ•°æ®</div>
            åæ ‡æ•°æ®è¯¸å¦‚ (x1,y1) (x2,y2) (x3,y3)
        </div>
    </template>
    <template id="coordtpl">
        <div v-show="enabled" class="seriesitem">
            <div class="type" v-soutline="show">
                <label>
                    <div v-show="!onlegend">åæ ‡</div>
                    <div v-show="onlegend"><input type="text" class="legend" placeholder="åæ ‡" v-model="legend" @keyup="on_change"></div>
                     [{{idInner|addZero}}]
                    <input type="checkbox" class="showToggle" v-model="show" @click="onschange" title="æ˜¾ç¤ºå›¾å±‚">
                </label>
            </div>
            <div><button class="upBut" @click="moveUp" title="ç½®äºé¡¶å±‚">â†‘</button></div>
            <div><button class="deleteBut" @click="deleteComp" title="åˆ é™¤ç³»åˆ—">ğŸ—‘</button></div>
            <div class="ttd" v-show="ontd">
                <input type="checkbox" @click="ontdchange" v-model="etd" title="ä¸‰ç»´åæ ‡">
            </div>
            <div class="ptd">
                <input type="checkbox" @click="onpchange" v-model="plus" title="æ ·å¼è¿ç»­">
            </div>
            <div class="ctd">
                <input type="checkbox" @click="oncchange" v-model="cycle" title="å¾ªç¯é¢ç§¯">
            </div>
            <div><input type="text" class="param" v-model="param" @keyup="onpachange" placeholder="å‚æ•°" @focus="param_focused" @blur="param_losefocus"></div>
            <!-- <br> -->
            <div><input type="text" class="coord" v-model="data" @keyup="on_change" placeholder="åæ ‡æ•°æ®" @focus="coord_focused" @blur="coord_losefocus"></div>
            <parambar v-show="paramfoc" :command="command" :etd="etd" :global="false"></parambar>
            <coordbar v-show="coordbar"></coordbar>
        </div>
    </template>
    <template id="tableparamtpl">
        <div class="tableparambar" style="display: block;">
            <div class="title" style="display: block;">è¡¨æ ¼å‚æ•°</div>
            è¡¨æ ¼å‚æ•°ç”¨äºæŒ‡å®šè¯»å–åˆ—ï¼Œä¾‹å¦‚ x=tab1, y=tab2ã€‚
        </div>
    </template>
    <template id="sourcetpl">
        <div v-show="enabled" class="seriesitem">
            <div class="type" v-soutline="show">
                <label>
                    <div><input type="text" class="legend" placeholder="è¡¨æº" v-model="sourceName" @keyup="on_change" v-validate="sourceName"></div>
                     ({{idInner|addZero}})
                    <input type="checkbox" class="showToggle" v-model="show" @click="onschange" title="æ˜¾ç¤ºå›¾å±‚">
                </label>
            </div>
            <div><button class="upBut" @click="moveUp" title="ç½®äºé¡¶å±‚">â†‘</button></div>
            <div><button class="deleteBut" @click="deleteComp" title="åˆ é™¤è¡¨æº">ğŸ—‘</button></div>
            <div><input type="file" id="files" class="fileChooser" @change="readFile"></div>
        </div>
    </template>
    <template id="tableptpl">
        <div v-show="enabled" class="seriesitem">
            <div class="type" v-soutline="show">
                <label>
                    <div v-show="!onlegend">æ–‡ä»¶</div>
                    <div v-show="onlegend"><input type="text" class="legend" placeholder="æ–‡ä»¶" v-model="legend" @keyup="on_change"></div>
                     [{{idInner|addZero}}]
                    <input type="checkbox" class="showToggle" v-model="show" @click="onschange" title="æ˜¾ç¤ºå›¾å±‚">
                </label>
            </div>
            <div><button class="upBut" @click="moveUp" title="ç½®äºé¡¶å±‚">â†‘</button></div>
            <div><button class="deleteBut" @click="deleteComp" title="åˆ é™¤ç³»åˆ—">ğŸ—‘</button></div>
            <div class="ttd" v-show="ontd">
                <input type="checkbox" @click="ontdchange" v-model="etd" title="ä¸‰ç»´åæ ‡">
            </div>
            <div class="ptd">
                <input type="checkbox" @click="onpchange" v-model="plus" title="æ ·å¼è¿ç»­">
            </div>
            <div class="ctd">
                <input type="checkbox" @click="oncchange" v-model="cycle" title="å¾ªç¯é¢ç§¯">
            </div>
            <div><input type="text" class="param" v-model="param" @keyup="onpachange" placeholder="å‚æ•°"  @focus="param_focused" @blur="param_losefocus"></div>
            <div><input type="text" class="coord" v-model="tableparam" @keyup="on_change" placeholder="è¡¨å‚æ•°" @focus="tableparam_focused" @blur="tableparam_losefocus"></div>
            <div v-show="enablesource">
                <select v-model="sourceSelect" @change="on_change">
                    <option v-for="opt in sourceNameList" :value="opt" v-show="opt!=null">{{opt}}</option>
                </select>
            </div>
            <div v-show="sourceSelect=='...'||!enablesource">
                <div style="display:none"><input type="text" class="coord" v-model="fileName" placeholder="æ•°æ®æ–‡ä»¶"></div>
                <div style="display:none"><input type="text" class="coord" v-model="datat" @keyup="on_change" placeholder="æ•°æ®è¡¨"></div>
                <div style="display: inline-block; margin-left: -10px;"><input type="file" id="files" class="fileChooser" @change="readFile"></div>
            </div>
            <parambar v-show="paramfoc" :command="command" :etd="etd" :global="false"></parambar>
            <tableparambar v-show="tableparambar"></tableparambar>
        </div>
    </template>
    <template id="nodetpl">
        <div v-show="enabled" class="seriesitem">
            <div class="type" v-soutline="show">
                <label>
                    <div><input type="text" class="legend" placeholder="æ ‡æ³¨" v-model="pin" @keyup="on_change"></div>
                     [{{idInner|addZero}}]
                    <input type="checkbox" class="showToggle" v-model="show" @click="onschange" title="æ˜¾ç¤ºå›¾å±‚">
                </label>
            </div>
            <div><button class="upBut" @click="moveUp" title="ç½®äºé¡¶å±‚">â†‘</button></div>
            <div><button class="deleteBut" @click="deleteComp" title="åˆ é™¤æ ‡æ³¨">ğŸ—‘</button></div>
            <div class="ytd">
                <input type="checkbox" @click="ontdchange" v-model="etd" title="é»„è‰²æ ‡æ³¨">
            </div>
            <div><input type="text" class="param" v-model="param" @keyup="on_change" placeholder="æ—‹è½¬è§’åº¦" v-show="etd"></div>
            <div><input type="text" class="coord" v-model="pos" @keyup="on_change" placeholder="æ ‡æ³¨ä½ç½®"></div>
        </div>
    </template>
    <template id="propertyselecttpl">
        <tr>
            <td>{{chname}}</td>
            <td>
                <select v-model="value" @change="on_change">
                    <option v-for="opt in options" :value="opt">{{opt}}</option>
                </select>
            </td>
        </tr>
    </template>
    <template id="propertytpl">
        <tr>
            <td>{{chname}}</td>
            <td style="display:none">{{propkey}}</td><td><input type="text" v-model="value" @keyup="on_change"></td>
        </tr>
    </template>
    <template id="surplustpl">
        <div>
            <tr>
                <td>å¢è¡¥å‚æ•°</td>
                <td><input type="text" class="param" v-model="param" @keyup="onpachange" placeholder="å‚æ•°"  @focus="param_focused" @blur="param_losefocus"></td>
            </tr>
            <parambar :global="true" v-show="paramfoc" :command="command" :etd="ontd"></parambar>
        </div>        
    </template>
    <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.11/vue.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/vue-clipboard2/0.3.1/vue-clipboard.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/split.js/1.6.2/split.min.js"></script>
    <script src="lang/sparamdic_cn.js"></script>
    <script src="lang/directive_cn.js"></script>
    <script src="main.js"></script>
    <script>
        if(document.body.clientWidth>900){
            // å¯ç”¨split
            var sps = document.getElementsByClassName('split');
            for(var i in [0,1,2]){
                sps[i].style.float = 'left';
                sps[i].style.height = '575px';
            }
            var instance = Split(['#panel-one','#panel-two','#panel-three'],{
                sizes:[30,35,35],
                // minSize: [400,400,0],
                minSize: [0,0,0],
                // expandToMin: true,
                direction: 'horizontal',
            });
            // instance.collapse(0);
            document.getElementById('codedetail').open = true;
        }
        else 
            document.getElementById('codedetail').open = false;
    </script>
</body>
</html>